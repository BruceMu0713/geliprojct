"use strict";define(["jquery","cookie"],function(d,f){return{carts:function(){var t=d('input[type="checkbox"]'),n=d(".allbox"),e=d(".shopid"),i=d(".mainshopbox"),s=d(".probtn");d(".deepbtn");t.on("click",function(){d(this).is(":checked")?d(this).prop("checked",!0):d(this).prop("checked",!1)}),n.click(function(){var t=i.find('input[type="checkbox"]');d(this).is(":checked")?t.prop("checked",!0):t.prop("checked",!1),p()}),s.each(function(){d(this).click(function(){if(d(this).is(":checked")){var t=s.length,i=0;s.each(function(){d(this).is(":checked")&&i++}),i==t&&n.prop("checked",!0)}else n.prop("checked",!1)})}),e.each(function(){d(this).click(function(){if(d(this).is(":checked")){var t=e.length,i=0;e.each(function(){d(this).is(":checked")&&i++}),i==t&&n.prop("checked",!0),d(this).parents(".mainshopbox").find(".probtn").prop("checked",!0)}else n.prop("checked",!1),d(this).parents(".mainshopbox").find(".probtn").prop("checked",!1);p()})}),i.each(function(){d(this);var n=i.find(".probtn");n.each(function(){d(this).click(function(){if(d(this).is(":checked")){var t=n.length,i=0;n.each(function(){d(this).is(":checked")&&i++}),i==t&&d(this).parents(".mainshopbox").find(".shopid").prop("checked",!0)}else d(this).parents(".cartBox").find(".shopid").prop("checked",!1);p()})})});var c=d(".adbtn"),a=d(".rebtn"),h=d(".p-quantity");c.click(function(){var t=d(this).prev("input"),i=parseInt(t.val())+1,n=d(this).parents(".amount_box").find(".rebtn"),e=d(this).parents(".listBox").find(".danjia"),s=d(this).parents(".listBox").find(".danjia1").html(),c=i*parseInt(s.trim().substring(1));t.val(i),e.html("￥"+c),1<t.val()&&n.hasClass("reSty")&&n.removeClass("reSty"),p()}),a.click(function(){var t=d(this).next("input"),i=parseInt(t.val())-1,n=d(this).parents(".listBox").find(".danjia"),e=d(this).parents(".listBox").find(".danjia1").html(),s=i*parseInt(e.trim().substring(1));1<t.val()&&(t.val(i),n.html("￥"+s)),1!=t.val()||d(this).hasClass("reSty")||d(this).addClass("reSty"),p()}),h.keyup(function(){var t,i,n=d(this).parents(".listBox").find(".danjia"),e=d(this).parents(".listBox").find(".danjia1").html();""==d(this).val()&&d(this).val("1"),d(this).val(d(this).val().replace(/\D|^0/g,"")),i=(t=d(this).val())*parseInt(e.trim().substring(1)),d(this).attr("value",t),n.html("￥"+i),p()});var o=null,r="";function l(){d(".model_bg").fadeOut(300),d(".my_model").fadeOut(300)}function p(){var n=0,e=0;d("#btnDisBlock button");s.each(function(){if(d(this).is(":checked")){console.log(d(this).parents(".listBox").find(".danjia").html());var t=parseInt(d(this).parents(".listBox").find(".danjia").html().trim().substring(1)),i=parseInt(d(this).parents(".listBox").find(".p-quantity").val());n+=t,e+=i}}),d("#zongjia").html(n),d(".allnum").html(e)}d(".delBtn").click(function(){o=d(this).parents(".listBox"),r=o.parents(".man1_con"),d(".model_bg").fadeIn(300),d(".my_model").fadeIn(300)}),d(".closeModel").click(function(){l()}),d(".dialog-close").click(function(){l()}),d(".dialog-sure").click(function(){var t=f.get("shop");t=JSON.parse(t),f.remove(),o.remove(),null!=r.html().trim()&&0!=r.html().trim().length||r.parents(".mainshopbox").remove(),l(),p()})}}});